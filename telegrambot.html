<!-- index.html -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>React Tutorial</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.2.1/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.2.1/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/remarkable/1.6.2/remarkable.min.js"></script>
    <script src="../_js/jquery-1.7.2.min.js"></script>
    <script>
                                </script>
      <script type="text/babel">
      </script>
  </head>
  <body>
    <div id="zoom"></div>
    <script type="text/babel">
        var par = new Promise(function(resolve,reject) {
             $.ajax({
		    type: "POST",
		    dataType: 'jsonp',
		    url: "https://api.novaposhta.ua/v2.0/json/",
		data: {
			      "modelName": "Address",
		      "calledMethod": "getCities",
		      "methodProperties": {}, 
		      "apiKey": "6f94a6391cb5134ee68ddb7924de2a3d"
		    
		},
			  success: function(msg) { 
                  resolve(msg);
                }
            });
        });
var CITY;
class Form extends React.Component {
    constructor(props) {
        super(props);
        this.state = {value:''};
        this.handleChange = this.handleChange.bind(this);
    par.then(function(nameCity){
        CITY = nameCity.data;
    })
    }
    handleChange(event) {
        this.setState({value: event.target.value});
        console.log(CITY);
    }
    render() {
        return (
            <div>
            <form >
            <input type="text" value={this.state.value} onChange={this.handleChange}/>
                <input type="submit" />
            </form>
            </div>
            )
    }
} 
ReactDOM.render(
    <Form />,
    document.getElementById('zoom')
    )
    </script>
  </body>
</html>
